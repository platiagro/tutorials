
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Criação de Tarefas</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="platiagro-tasks"
                  title="Criação de Tarefas"
                  environment="web"
                  feedback-link="https://github.com/platiagro/tutorials">
    
      <google-codelab-step label="Introdução" duration="1">
        <p>Para criar uma tarefa, o usuário deverá clicar no menu Tarefas e depois no botão <img alt=" + Nova Tarefa " src="img/9da33d763717cb97.png"></p>
<p class="image-container"><img alt="Página Tarefas" src="img/7a6bf4a4deaeb3ab.png"></p>
<p><strong>Descrição:</strong> Na página &#34;Tarefas&#34;, será apresentada uma lista com todas as tarefas existentes. As informações das tarefas estarão divididas em três colunas: Nome da Tarefa, Descrição e Ação. Nesta tela serão apresentadas as tarefas da plataforma e dos usuários.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Seleção da nova tarefa" duration="2">
        <p>A plataforma oferece uma série de exemplos para iniciar nova tarefa. Ela também oferece uma opção em branco.</p>
<p class="image-container"><img alt="Página Nova Tarefa" src="img/fefe00c7e6b957ec.png"></p>
<p><strong>Descrição:</strong> A janela &#34;Nova Tarefa&#34;, possui dois campos obrigatórios (assinalados com asterisco) e um opcional. O primeiro campo obrigatório é o tipo do exemplo ou &#34;template&#34; inicial. A plataforma oferece grande quantidade de exemplos envolvendo classificação, regressão, seleção de &#34;features&#34; e muitos outros. O segundo campo obrigatório é o nome da tarefa. O nome da tarefa será mostrado junto com os outros nomes então escolha um nome que facilite encontrar sua tarefa no futuro. O campo opcional é uma descrição de sua tarefa. Se não precisar descrever ou registrar algum detalhe importante pode ficar em branco. O botão &#34;Cancelar&#34; fecha esta janela e volta para a anterior sem gravar nada. O botão &#34;Criar Notebooks&#34; abre nova aba no seu navegador com três divisões que serão comentadas na próxima seção deste tutorial.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Criação de Tarefas em Branco" duration="4">
        <p>Após selecionar e preencher os campos necessários a plataforma abre nova aba com as divisões Experiment.jpynb e Deployment.jpynb.</p>
<p class="image-container"><img alt="Nova Tarefa em Branco" src="img/9f444d437d4293f5.png"></p>
<p><strong>Descrição:</strong> A aba &#34;Nova Tarefa&#34;, possui algumas divisões criadas para orientar a elaboração da tarefa que serão comentados em outra seção. Esta aba é criada com as divisões Experiment.jpynb e Deployment.jpynb. Também pode ser criada outra seção para Terminal onde podem ser executados comandos do Unix/Linux. Nesta aba também podem ser visualizados os artefatos da tarefa e a localização destes artefatos no servidor.    Obs.1: o sinal de adição <img alt=" insert a cell " src="img/cf0a6bb821168a43.png"> no menu superior cria mais uma célula para seus códigos    Obs.2: o ícone com a tesoura <img alt=" cut a cell " src="img/b21071b42d3da9dd.png"> remove a célula selecionada    Obs.3: use CONTRL-ENTER para executar a célula selecionada porque o triângulo no alto da tela (Run...) não faz nada    Obs.4: o ícone <img alt=" add parameter " src="img/2bd9ed3eb3bbae78.png"> serve para inserir novo parâmetro (&#34;input&#34;)</p>
<p class="image-container"><img alt="Input" src="img/60f705506bcbe5f2.png"></p>
<p><strong>Descrição:</strong> A janela &#34;Add Parameter&#34;, possui alguns campos sobre o novo parâmetro. O campo &#34;Variable name&#34; deve ser preenchido levando em consideração as regras para nomes de variáveis em Python. O campo &#34;Label&#34; deve ser preenchido com o nome que vai aparecer na área de parâmetros da plataforma que abre em uma aba lateral.</p>
<p class="image-container"><img alt="Dataset" src="img/7a56943e8cb5ebb1.png"></p>
<p>Na seção <strong>Declaração de parâmetros e hiperparâmetros</strong> é importante ressaltar que um dataset deve ter o método read(), como um dataframe Pandas.</p>
<p class="image-container"><img alt="Experiment" src="img/e1fae41096ee5770.png"></p>
<p>Neste exemplo foi criado um parâmetro (input) que aparece no Experiment.jpynb como &#34;var_name&#34; e aparece na aba lateral com a identificação &#34;var_label&#34;.</p>
<p class="image-container"><img alt="Aba lateral" src="img/1657850a9e11a330.png"></p>
<p>O ícone <img alt=" open tabs " src="img/99cf36fbe5cd652f.png"> na parte de baixo da lateral esquerda da tela serve para exibir os principais artefatos da tarefa: Experiment.jpynb e Deployment.jpynb</p>
<p class="image-container"><img alt="Open tabs" src="img/2c3a16bc0b1a20ac.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Mostrar Terminal de Comandos Unix/Linux" duration="1">
        <p>O ícone <img alt=" file browser " src="img/1b342485b445f18c.png"> na parte de cima da lateral esquerda serve para exibir um navegador de arquivos que mostra todos os artefatos da tarefa e sua localização no servidor</p>
<p class="image-container"><img alt="File browser" src="img/4f0ebac426fe86ca.png"></p>
<p>O ícone com sinal de adição <img alt=" new launcher " src="img/db112616d340d159.png"> no menu superior perto da pasta preta serve para abrir o ícone para o &#34;Terminal de comandos&#34; e outras funcionalidades</p>
<p class="image-container"><img alt="New launcher" src="img/5e1bc11a0ada4a75.png"></p>
<p>Neste exemplo foram usados alguns comandos para verificar em que local do servidor estão localizados os arquivos desta tarefa.</p>
<p class="image-container"><img alt="Terminal" src="img/d2f4b81689a8992d.png"></p>
<p>O ícone <img alt=" new folder " src="img/7641c4bad0e63f22.png"> serve para criar novas pastas na pasta atual. O ícone <img alt=" upload files " src="img/9aa1e21ccd596549.png">  serve para fazer upload de arquivos da máquina do usuário para a pasta do projeto. É importante ressaltar que esta pasta é temporária e os arquivos carregados nesta pasta deverão ser carregados novamente para futuras pastas deta tarefa. A maneira de fazer com que os arquivos necessários sejam copiados automaticamente para esta pasta é via o comando wget. Exemplo &#34;wget https://raw.githubusercontent.com/platiagro/.../nome_arquivo.csv&#34;</p>


      </google-codelab-step>
    
      <google-codelab-step label="Importar Classes e Métodos" duration="1">
        <p>Se o código for grande é melhor criar classes e importar no componente com &#34;from file import classes, métodos&#34; Para importar classes e métodos no componente primeiro precisa carregar o arquivo .py para a pasta do componente</p>
<p>Passos para levar arquivos até a pasta do componente:    a) encontrar a URL do arquivo de origem no github ou equivalente    b) executar wget em uma céula do Experiment. Exemplo:</p>
<pre><code>  !wget https://github.com/platiagro/.../nome_arquivo.py
</code></pre>
<p class="image-container"><img alt="Importar classes" src="img/5b7f49a8d55b0ed4.png"></p>
<p>A tabela será redimensionada em função do tamanho do dataframe (df)</p>


      </google-codelab-step>
    
      <google-codelab-step label="Mostrar Resultados Aba Lateral" duration="1">
        <p>Mostrar resultados em forma de gráfico e tabela usando dataframe Pandas e Matplotlib.</p>
<p class="image-container"><img alt="Mostrar resultados codigo" src="img/10382f47c2d02ed5.png"></p>
<p>Se tudo correu bem então o botão &#34;Visualizar resultados&#34; aparece na aba lateral da plataforma.</p>
<p class="image-container"><img alt="Mostrar resultados aba lateral" src="img/7b0456f6e38021a0.png"></p>
<p>Após clicar no ícone <img alt=" Visualizar resultados " src="img/91cc9072664c2d3c.png"> será aberta nova janela com a tabela de resultados. A figura a seguir mostra um exemplo de uma tabela com apenas 5 colunas.</p>
<p class="image-container"><img alt="Mostrar resultados aba lateral pequeno" src="img/da00d7e3743fbd71.png"></p>
<p>A figura a seguir mostra outra tabela com 17 colunas redimensionada para caber na tela.</p>
<p class="image-container"><img alt="Mostrar resultados aba lateral grande" src="img/26052d8d7c7c1a40.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Aba Deployment" duration="2">
        <p>A aba <strong>Deployment</strong> armazena o código necessário para a plataforma executar no servidor o modelo que foi criado na aba Experiment. O modelo deve ser importado e encapsulado na classe Model então esta classe precisa implementar o método &#34;predict()&#34;. A primeira seção desta aba serve para <strong>identificação</strong> da atividade, do autor e de seus principais objetivos. Recomenda-se que sejam registrados o nome do autor e a data de criação.</p>
<p class="image-container"><img alt="Identificar classe" src="img/dd886589fc1c8190.png"></p>
<p>A segunda seção <strong>define a classe Model</strong> que precisa implementar o método &#34;predict()&#34; para ser executado pelo servidor. Neste exemplo o método &#34;predict()&#34; apenas mostra o parâmetro recebido e retorna este parâmetro para a interface gráfica. As capturas de tela da interface gráfica serão mostradas no final deste tutorial porém a aba Deploymente também pode ser usada para conferir o resultado.</p>
<p class="image-container"><img alt="Declarar classe" src="img/4eb870bb10265a30.png"></p>
<p>Note que a classe modelo deve retornar uma lista então talvez seja necessário acrescentar o método class_names(). Outro ajuste importante para modelos regressores é o retorno convertido para um array numpy.</p>
<p class="image-container"><img alt="Definir predict" src="img/2dac50b20852be9.png"></p>
<p>A seção <strong>Teste do serviço REST</strong> orienta como o pesquisador pode testar o resultado da execução de seu modelo. Ela ajuda a criar um arquivo com um objeto json (JavaScipt Object Notation) para ser enviado ao seu modelo via protocolo REST.</p>
<p class="image-container"><img alt="Teste Rest" src="img/3a7653d8e625a33b.png"></p>
<p>É importante ressaltar que o valor enviado ao modelo será sorteado de um intervalo que deve ser especificado na área <strong>&#34;range&#34;</strong> do objeto json.</p>
<p class="image-container"><img alt="Teste json" src="img/75cb0856382113b9.png"></p>
<p>Se o modelo for do tipo Regressor então o arquivo json precisa ser ajustado. Neste exemplo o modelo espera um arquio com duas colunas contendo valores numéricos. Por isto a coluna &#34;p0&#34; tem o range [5.0, 5.0] e a coluna &#34;p1&#34; tem o range [6.0, 6.0], assim a plataforma vai sortear um valor entre 5 e 5 para a primeira coluna e um valor entre 6 e 6 para a segunda coluna.</p>
<p class="image-container"><img alt="Arquivo json para teste de regressor" src="img/8a2f618201273113.png"></p>
<p><strong>test_deployment(&#34;contact.json&#34;)</strong> A última parte desta aba se encarrega de enviar o objeto json que foi gravado no arquivo contact.json usando o método test_deployment(&#34;contact.json&#34;)</p>
<p class="image-container"><img alt="Teste Resultado" src="img/69fcc9dda9b7e715.png"></p>
<p><strong>Resultado do teste na aba Deployment</strong> O objeto json é exibido para o pesquisador conferir se os resultados estão de acordo com o esperado.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Implantação e logs" duration="2">
        <p>Cada projeto pode ter vários experimentos, porém apenas um deles será implantado. Espera-se que os experimentos sejam criados e explorados até que o pesquisador se decida pela implantação de um deles para execução em tempo real no servidor.</p>
<p class="image-container"><img alt="Experimento executar" src="img/eafe4471c09b308f.png"></p>
<p>Depois de criada a atividade desejada, ela deve ser <strong>executada</strong> para permitir sua implantação. Se ocorrer algum erro durante sua execução o botão de implantação fica bloqueado.</p>
<p class="image-container"><img alt="Experimento implantar" src="img/72235ff11f8f0a9f.png"></p>
<p>O botão <strong>Implantação</strong> somente será liberado após uma execução completa da atividade sem nenhum erro. É importante lembrar que este botão será liberado somente uma vez para cada projeto. Caso dois ou mais experimentos apresentem bons resultados então o pesquisador deve considerar a possibilidade de criar novos projetos para eles.</p>
<p class="image-container"><img alt="Experimento implantado" src="img/368b297e95748b7b.png"></p>
<p>A janela de <strong>Fluxos Implantados</strong> mostra os fluxos implantados pelo pesquisador. A coluna &#34;Status&#34; apresenta a situação atual do experimento. O experimento deve ter o status &#34;Succeeded&#34; para poder ser executado. A coluna &#34;Nome&#34; apresenta o nome do experimento implantado.    É importante ressaltar que este nome é composto pelo nome do projeto seguido pelo nome do experimento selecionado. A coluna &#34;URL&#34; contém a url do experimento implantado. Ela pode ser usada em um terminal de comandos Unix/Linux. A coluna &#34;Data de Criação&#34; contém a data e a hora da implantação do experimento. A coluna &#34;Ação&#34; contém três opções:    <strong>&#34;Deletar&#34;</strong> (apagar) o experimento    <strong>&#34;Testar Inferência&#34;</strong> para executar o experimento enviando um arquivo CSV para o modelo.    <strong>&#34;Logs&#34;</strong> para visualizar a mensagens do modelo em execução.</p>
<p>A ação <strong>Testar Inferência</strong> apresenta em uma janela o resultado recebido da execução do modelo no servidor. O título desta janela é <strong>Visualizar resultados</strong></p>
<p class="image-container"><img alt="Experimento testado" src="img/3dd45a01125c9a3e.png"></p>
<p>A ação <strong>Logs</strong> exibe uma janela para logs. Como a quantidade de mensagens de log costuma ser grande esta janela possui paginação. Note que as mensagens mais recentes ficam no fim da lista.</p>
<p class="image-container"><img alt="Experimento log" src="img/572ae63cf2420db.png"></p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
